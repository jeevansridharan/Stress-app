<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Stress Analyzer</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Start Page -->
    <div id="startPage" class="page active">
        <div class="container">
            <h1>Student Stress Analyzer</h1>
            <p class="subtitle">Anonymous and Simple Stress Assessment</p>
            <button onclick="showInputPage()" class="btn-primary">Start</button>
        </div>
    </div>

    <!-- Input Page -->
    <div id="inputPage" class="page">
        <div class="container">
            <h1>How are you feeling?</h1>
            
            <div class="form-section">
                <label class="form-label">Select your mood:</label>
                <div class="mood-options">
                    <button onclick="selectMood('low')" id="moodLow" class="mood-btn">üòä Low Stress</button>
                    <button onclick="selectMood('medium')" id="moodMedium" class="mood-btn">üòê Medium Stress</button>
                    <button onclick="selectMood('high')" id="moodHigh" class="mood-btn">üò∞ High Stress</button>
                </div>
            </div>

            <div class="form-section">
                <label class="form-label">Answer these questions:</label>
                
                <div class="question">
                    <p>Are exams stressing you?</p>
                    <div class="radio-group">
                        <label><input type="radio" name="q1" value="yes"> Yes</label>
                        <label><input type="radio" name="q1" value="no"> No</label>
                    </div>
                </div>

                <div class="question">
                    <p>Are you feeling overwhelmed?</p>
                    <div class="radio-group">
                        <label><input type="radio" name="q2" value="yes"> Yes</label>
                        <label><input type="radio" name="q2" value="no"> No</label>
                    </div>
                </div>

                <div class="question">
                    <p>Are you getting enough sleep?</p>
                    <div class="radio-group">
                        <label><input type="radio" name="q3" value="yes"> Yes</label>
                        <label><input type="radio" name="q3" value="no"> No</label>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <label class="form-label">How are you feeling today? (Optional)</label>
                <textarea id="feelings" rows="4" placeholder="Share your thoughts..."></textarea>
            </div>

            <button onclick="analyzeStress()" class="btn-primary">Analyze My Stress</button>
        </div>
    </div>

    <!-- Result Page -->
    <div id="resultPage" class="page">
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <h1>üßò Wellness Dashboard</h1>
            <div id="stressLevelBadge" class="stress-badge">Loading...</div>
        </div>

        <div class="container dashboard-container">
            <!-- Main Result Card -->
            <div class="dashboard-card main-result-card">
                <h2>Your Stress Assessment</h2>
                <div id="stressResult" class="stress-result"></div>
            </div>

            <!-- Interactive Feature Cards -->
            <div class="features-grid">
                <!-- Breathing Exercise Card -->
                <div class="dashboard-card feature-card">
                    <div class="card-icon">üå¨Ô∏è</div>
                    <h3>Breathing Exercise</h3>
                    <p>Follow guided breathing patterns</p>
                    <button onclick="openBreathingModal()" class="dashboard-btn primary-btn">
                        Start Exercise
                    </button>
                </div>

                <!-- Music Card -->
                <div class="dashboard-card feature-card">
                    <div class="card-icon">üéµ</div>
                    <h3>Calming Music</h3>
                    <p>Listen to relaxing sounds</p>
                    <button id="musicToggleBtn" onclick="toggleMusic()" class="dashboard-btn primary-btn">
                        ‚ñ∂Ô∏è Play Music
                    </button>
                    <button onclick="nextAudioTrack()" class="dashboard-btn secondary-btn" style="margin-top: 8px;">
                        ‚è≠Ô∏è Next Track
                    </button>
                </div>

                <!-- Visual Relief Card -->
                <div class="dashboard-card feature-card">
                    <div class="card-icon">üåø</div>
                    <h3>Visual Relief</h3>
                    <p>Calming nature visuals</p>
                    <button onclick="toggleVisuals()" class="dashboard-btn primary-btn" id="visualToggleBtn">
                        Show Visuals
                    </button>
                </div>

                <!-- Quick Tips Card -->
                <div class="dashboard-card feature-card">
                    <div class="card-icon">üí°</div>
                    <h3>Quick Tips</h3>
                    <p>Personalized advice</p>
                    <button onclick="toggleTips()" class="dashboard-btn primary-btn" id="tipsToggleBtn">
                        View Tips
                    </button>
                </div>
            </div>

            <!-- Collapsible Visual Relief Section -->
            <div id="visualsSection" class="collapsible-section" style="display: none;">
                <div class="dashboard-card">
                    <div class="section-header">
                        <h2>üåø Visual Relief</h2>
                        <button onclick="toggleVisuals()" class="close-section-btn">‚úï</button>
                    </div>
                    <div class="visuals-content">
                        <div id="imageContentArea" style="display: none;">
                            <img id="reliefImage" src="" alt="Calming visual" class="relief-rotating-image">
                            <p id="reliefCaption" class="relief-image-caption">Take a deep breath.</p>
                            <p id="imageCounter" style="text-align: center; color: #666; font-size: 14px; margin: 10px 0;">Image 1 of 20</p>
                        </div>
                        <div class="visual-controls">
                            <button onclick="startImageRotation()" id="startImagesBtn" class="dashboard-btn secondary-btn">‚ñ∂Ô∏è Auto Play</button>
                            <button onclick="stopImageRotation()" id="stopImagesBtn" class="dashboard-btn secondary-btn" style="display: none;">‚è∏Ô∏è Stop Auto</button>
                            <button onclick="previousImage()" class="dashboard-btn secondary-btn">‚óÄÔ∏è Previous</button>
                            <button onclick="nextImage()" class="dashboard-btn secondary-btn">Next ‚ñ∂Ô∏è</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Collapsible Tips Section -->
            <div id="tipsSection" class="collapsible-section" style="display: none;">
                <div class="dashboard-card">
                    <div class="section-header">
                        <h2>üí° Personalized Tips</h2>
                        <button onclick="toggleTips()" class="close-section-btn">‚úï</button>
                    </div>
                    <div id="personalizedSuggestions" class="tips-grid"></div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="dashboard-actions">
                <button onclick="viewHistory()" class="dashboard-btn secondary-btn">üìä View History</button>
                <button onclick="restart()" class="dashboard-btn secondary-btn">üîÑ New Assessment</button>
            </div>

            <div class="disclaimer">
                <p>‚ö†Ô∏è <strong>Disclaimer:</strong> This is not medical advice. If you're experiencing severe stress, please consult a healthcare professional.</p>
            </div>
        </div>

        <!-- Breathing Exercise Modal -->
        <div id="breathingModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üå¨Ô∏è Breathing Exercise</h2>
                    <button onclick="closeBreathingModal()" class="close-modal-btn">‚úï</button>
                </div>
                <div class="breathing-animation-area">
                    <div id="breathingCircleModal" class="breathing-circle-modal">
                        <span id="breathingText" class="breathing-phase-text">Ready</span>
                    </div>
                    <p id="breathingInstruction" class="breathing-instruction-text">Click Start to begin</p>
                </div>
                <div class="modal-actions">
                    <button onclick="startBreathingCycle()" id="startBreathingModalBtn" class="dashboard-btn primary-btn">Start</button>
                    <button onclick="stopBreathingCycle()" id="stopBreathingModalBtn" class="dashboard-btn secondary-btn" style="display: none;">Stop</button>
                </div>
            </div>
        </div>

        <!-- Hidden Audio Elements -->
        <audio id="calmAudio1" loop>
            <source src="https://www.bensound.com/bensound-music/bensound-relaxing.mp3" type="audio/mpeg">
        </audio>
        <audio id="calmAudio2" loop>
            <source src="https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3" type="audio/mpeg">
        </audio>
        <audio id="calmAudio3" loop>
            <source src="https://www.bensound.com/bensound-music/bensound-slowmotion.mp3" type="audio/mpeg">
        </audio>
        <audio id="calmAudio4" loop>
            <source src="https://www.bensound.com/bensound-music/bensound-sunny.mp3" type="audio/mpeg">
        </audio>
        <audio id="calmAudio5" loop>
            <source src="https://www.bensound.com/bensound-music/bensound-pianomoment.mp3" type="audio/mpeg">
        </audio>
    </div>

    <!-- History Page -->
    <div id="historyPage" class="page">
        <div class="container">
            <h1>Your Stress History</h1>
            
            <div class="history-section">
                <h2>Weekly Stress Trend</h2>
                <canvas id="stressChart"></canvas>
                <p class="history-info" id="historyInfo"></p>
            </div>

            <button onclick="backToResult()" class="btn-secondary">Back to Result</button>
            <button onclick="restart()" class="btn-secondary">New Assessment</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
